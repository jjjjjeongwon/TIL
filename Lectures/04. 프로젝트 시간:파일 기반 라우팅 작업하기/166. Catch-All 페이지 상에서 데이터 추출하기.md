# 166. Catch-All 페이지 상에서 데이터 추출하기

## Filtered Events 표시를 위해 슬러그(...slug) 페이지에서 작업

### 이 페이지에서 해야 할 일

- **동적 세그먼트 값 추출**
  - 그 값은 이 페이지로 이동하는 URL에 포함/URL에서 연도, year와 월, month를 추출해서 해당 연도와 월에 맞는 이벤트를 찾음
- dummy-data.js 파일의 **getFilteredEvents 함수를 통해 해당 연도와 월에 맞는 이벤트**를 찾음
- 슬러그 컴포넌트에서는 이 데이터를 URL로부터 추출
  ![filterData](https://prod-files-secure.s3.us-west-2.amazonaws.com/6d4a6c9c-7168-49b2-8383-1bd212b2d8d4/9a976e88-a242-443a-8c97-865676fc1a9d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-01-02_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.27.51.png)
  filterData
  - useRouter 훅을 이용해 URL에 부호화된 데이터에 액세스
  - filterData는 router.query.slug에 액세스해서 가지고 올 수 있음
  - 첫 번째 요소는 첫 번째 세그먼트, 두 번째 요소는 두 번째 세그먼트
  - 세그먼트가 더 있었다면 배열에도 더 많은 항목 존재
  - **undefined도 로그에 나와 있는데 본 컴포넌트가 두 번 렌더링**되었기 때문
    - React의 작동 방식과 라우트 데이터의 추출 방식이 그 이유죠
    - 실질적으로 라우트 데이터를 추출하는 이 훅은 본 컴포넌트가 첫 번째 렌더링을 마친 후에 실행
    - 즉, 컴포넌트가 처음 렌더링될 때는 해당 URL 데이터에 대한 액세스가 없음
    - 굳이 문제라고 하지는 않겠지만 해당 URL 데이터에 대한 액세스가 생긴 후에 Filtered Events를 살펴봐야 함
- 필터 논리도 추가해줘야 함!(ex. 세번째 매개변수가 있는 경우 ‘/2021/5/abc’ )
  - 연도, 달이 숫자가 아닌 경우
  - numYear이 2030보다 큰 경우 혹은 2021보다 작은 경우
  - numMonth가 1보다 작을 때 그러니까 제대로 된 월이 아닌 경우 혹은 12보다 큰 경우
  - 등등
