이전과 마찬가지로 프로덕션에서의

유효성 재검사를 살펴보겠습니다

getStaticProps 반환 객체에

revalidate를 추가했으므로 이 build 스크립트를 실행할 건데

여기에 이 console.log 문이 있음을 기억하세요

이제 npm run build를 실행하면 이 전체 프로젝트가 프로덕션을 위해

준비되고 Next.js가 페이지를 사전 렌더링할 뿐 아니라

증분 정적 생성 (Incremental Static Regeneration)도 수행합니다

그리고 조금 위로 스크롤하면

빌드 프로세스의 일부로 정적 페이지를 생성하고 있고

이전에도 수행된 것을 확인할 수 있습니다

따라서 여기에서 (Re-)Generating... console.log 문을 볼 수 있습니다

그러나 여기서 이 옵션이 증분 정적 생성(ISR)을

의미하는 ISR이 선택되어 있음을 알 수 있습니다

여기에서 10초로 정해진 게 보이죠

그래서 Next.js는 여기에서 이것을 10초로 설정했다는 것을 인식하고

따라서 이 page / 즉 시작 페이지, 인덱스 페이지가

10초마다 재생성 되어야 한다는 것을 알고 있다는 것을 뜻하고

이게 (ISR: 10초)가 의미하는 거죠

이제 npm start로 컴퓨터에서 로컬로 구축된 웹 사이트를 실행할 수 있습니다

그러면 더 나은 디버깅 지원을 위한

개발 서버가 시작되는 npm run dev가 아니라요

npm start로는 빌드 프로덕션 준비 웹사이트를 실행하는 거죠

따라서 npm run build 후에

npm start를 실행해서 로컬 컴퓨터에서 이 프로덕션 준비 웹사이트를 볼 수 있죠

이제 이 준비된 페이지를 시작했고

그리고 여기에서 볼 수 있듯이 여기 프로덕션 데모 서버가 여전히

localhost:3000에서 실행되니까 브라우저에서 localhost:3000을 방문합니다

방문하면 여기에서 Product 데이터를 볼 수 있습니다, 빌드 프로세스의 일부로

사전 렌더링 되었기 때문에 사전 렌더링된 페이지를 볼 수 있는 거죠

이제 이 페이지를 여기에서 새로 고침하면

이 로그, 이 터미널에서 재생성하는 것을 볼 수 있습니다

그리고 여기에서 npm start로 서버를 시작했기 때문에

이 터미널에는 서버 사이드에 관한 게 표시되죠

즉, 터미널에서 보여주는 것은 서버에서 실행되는 코드의 출력이고

npm run build로 프로젝트를 빌드한 후에 (Re-)Generating...이 뜨는 것은

실제로 getStaticProps가 프로덕션 준비 사이트를 실행하는

서버에서 다시 실행되었음을 나타내죠

지난 강의들에서 제가 반복해서 설명했던 바로 그 내용을

여기에서 보실 수 있는 거예요

이 getStaticProps 함수는 서버에서 다시 실행되었는데

브라우저에서도 아니고 빌드 프로세스 중에서도 아닌

npm start로 배포된 후의 서버에서 실행되는 거예요

따라서 이게 유효성 재검사가 실행됨을 의미하고

여기 10초 설정에 의해 재구축된 거고 지금 또 10초가 지났을 테니

새로 고침하면 또 (Re-)Generating...이 보이죠

빠르게 몇 번을 새로 고침하면

아직 10초가 지나지 않았기 때문에 (Re-)Generating...이 나오진 않죠

이 모든 작동 방식을 명확하게 이해하셨기를 바랍니다
