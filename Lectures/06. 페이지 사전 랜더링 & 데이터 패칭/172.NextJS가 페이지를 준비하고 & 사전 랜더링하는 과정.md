사전 렌더링되지 않았을 때 말이죠 이 작업을 Next.js가 하는데

즉 페이지를 다시 클라이언트로 전송된 뒤에만 데이터를 로딩하는 대신

Next.js는 페이지와 필요할 법한 모든 데이터가 있는 HTML 콘텐츠를

사전에 렌더링합니다

사전에 HTML 페이지를 완성해 놓고

완전히 채워진 HTML 파일을

클라이언트, 즉 페이지의 방문자에게 전송하는 거죠

SEO의 관점에서 아주 훌륭하죠

하지만 여전히 대화형 React 앱은 필요하죠

대화형 앱을 만들려고 React를 사용하는 거죠

아니라면 HTML이나 CSS 앱을 구축했겠죠

React를 사용하는 이유는 포럼 접속이나 에러 검증 등의

버튼 클릭에 반응해서 사용자 상호작용을 하기 위함이죠

Next.js는 단순히 사전 렌더링된 페이지를 재전송하는 데 그치지 않고

포함된 JavaScript 코드를 모두 재전송합니다

이런 재전송을 해당 페이지에 대해 수화(hydrate)한다고 합니다

재전송된 JavaScript 코드는

나중에 사전 렌더링된 페이지를 대체하고

이에 React가 알맞은 작업을 수행하죠

상호작용하는 페이지나 앱이 있다면 아주 좋은 기능입니다

이때 처음에 재전송한 사전 렌더링된 페이지에는

주요 콘텐츠가 모두 포함되어 있는 상태이기 때문에

이에 검색 엔진 크롤러도 전체 페이지에 이미 포함된

모든 콘텐츠를 살펴보게 됩니다

이때 상호작용 페이지가 아니어도

크롤러는 콘텐츠만 확인하니 문제가 안되고요

이게 바로 사전 렌더링의 개념입니다

더 정확히 말하면 Next.js는 페이지를 사전에 준비하는데

이때 모든 HTML 콘텐츠를 사전에 구축하고

필요할 모든 데이터를 사전에 로딩하는 방식을 따릅니다

여기서 하나 짚고 넘어갈 점은 사전 렌더링은

오직 최초 로딩할 때만 영향을 미친다는 것입니다

페이지를 방문하면 로딩되는 첫 번째 페이지가 사전 렌더링 된 거죠

Next.js와 React로 구축된 페이지에서는

페이지의 수화, 즉 첫 번째 렌더링이 끝나고 나면

다시 표준 싱글 페이지 애플리케이션으로 돌아갑니다

그때부터는 React가 프론트엔드에서 모든 처리를 수행하죠

그 후에 페이지가 바뀔 때, 즉 같은 웹사이트의 다른 페이지로 넘어갈 때는

해당 페이지가 사전 렌더링되지 않고 React를 통해 클라이언트 사이드에서 생성됩니다

사전 렌더링되는 건 최초 접속하는 첫 번째 페이지뿐이죠

따라서 React가 준비를 마칠 때까지 빈 페이지를 보는 대신에

모든 초기 콘텐츠가 포함된 사전 렌더링된 페이지가 표시되는 겁니다

이를 위해 Next.js에는 두 가지 사전 렌더링 양식이 있습니다

둘 다 배울 테니 여러분은 둘 중 하나를 선택하시면 됩니다

원하시는 걸 고르면 돼요

첫 번째 양식이자 권장 양식은 바로 정적 생성입니다

두 번째 양식은 서버 사이드 렌더링(SSR)이고 대체 가능하죠

지금은 잘 모르시겠지만 본 섹션을 통해 두 방법 모두 자세히 살펴볼 겁니다

SSR과 정적 생성의 가장 큰 차이는

정적 생성은 빌드되는 동안 모든 페이지가 사전 생성된다는 것입니다

따라서 프로덕션용 애플리케이션을 구축한다면

배포 전에 모든 페이지가 준비된다는 거죠

서버 사이드 렌더링의 경우에는 배포 후 요청이 서버까지

오는 바로 그때 모든 페이지가 생성됩니다

이 둘을 함께 사용하는 방식도 있는데 본 섹션에서 둘의 개념 모두 자세히 보고

언제, 어떤 걸 사용해야 하는지까지 알아보도록 하겠습니다

이번 시간을 통해 사전 렌더링에 대한 핵심 개념을 잘 이해하셨길 바라며

다음 시간부터는 페이지 사전 렌더링에 대한 여러 개념을 함께 탐구해 보겠습니다

