클라이언트 사이드 데이터 페칭(Client-side Data Fetching)을 알아보자!

지금까지 배운 것과는 반대의 개념

그동안 데이터를 페칭하고 준비할 때 개발 과정에서 서버 측에서 데이터를 페칭하고 준비했음

그런데 Next.js 애플리케이션을 개발하다 보면 때로는 사전 렌더링을 할 필요가 없거나 사전 렌더링을 할 수 없는 데이터를 다루게 됨 → 갱신 주기가 잦은 데이터인 경우

- 예를 들어 주식 데이터를 어떤 페이지에 표시하려고 하는데 그 데이터가 매초마다 여러 차례 변경된다면 프리페칭과 사전 렌더링을 하는 의미가 없음. 페이지를 방문하면 이미 그 데이터는 과거의 것이 되어 있을 테니까!
  - 그런 경우에는 페이지를 방문했을 때 로딩 아이콘을 표시하고 방문했을 때의 최신 데이터를 가져와 백그라운드에서 업데이트하는 것이 사용자 입장에서는 가장 좋을 것
- 또 다른 예로는 특정 유저에만 한정되는 데이터가 있음. 온라인 쇼핑몰의 최근 주문 내역과 같은 데이터가 이에 해당
  - 계정에 접속해서 프로필 페이지에서 특정한 데이터를 열람하는 경우에는 페이지를 사전 렌더링할 필요가 없음. 검색 엔진에서도 개인 프로필을 확인하지 않기도 하고 사용자 경험 측면에서도 프로필 페이지에 방문할 때 데이터 로드를 조금 기다려도 그리 나쁘진 않으니깐
  - 즉, 접속하자마자 처음부터 데이터가 있는 것보다는 페이지상에서 탐색이 빠른 게 더 중요함

또는 데이터의 일부분만 표시하는 경우도 있을 것

- 예를 들어 다양한 데이터가 표시되는 대시보드 페이지의 경우에는 모든 데이터를 한 번에 불러오도록 하면 서버에서 대시보드 요청을 처리하는 데 시간이 많이 소요되므로 개발 단계에서 이 페이지를 사전 렌더링할 이유가 없음
  - 그 페이지의 정보는 다분히 개인적이거나 변동이 잦을 테니까
  - 그런 경우에는 사전 렌더링보다는 주어진 React 애플리케이션에 포함된 데이터를 사용자가 페이지에 방문할 때만 불러오도록 해야 함

몇 가지 대표적인 예를 살펴봤고 그 외에도 많은 상황에서 데이터 프리페칭과 페이지 사전 생성 방식이 제대로 기능하지 못하거나 필요하지 않을 수 있으며,

따라서 그 경우에는 사전 생성이나 프리페칭 대신 React 컴포넌트에서 기존 접근법인 useEffect나 fetch 같은 함수를 이용해서 클라이언트 측 React 앱 내의 API에서 데이터를 가져오는 것이 좋음

즉, getStaticProps나 getServerSideProps 대신 서버가 아니라 클라이언트에서 코드가 실행될 때 컴포넌트에서 데이터를 가져오도록 구축하는 것
