# 페이지의 여러 인스턴스가 사전 렌더링 되는 작업을 실행해서 보자!

우선 `npm run build` 명령을 실행해서 프로덕션용으로 구축

이를 통해 최적화된 프로덕션 빌드를 다시 생성하고 사전에 렌더링해야 할 페이지를 모두 미리 렌더링

아래 사진을 보면 몇몇 페이지가 사전 렌더링 되었고 최종적으로 5페이지를 생성한 것을 알 수 있음

또한 404 페이지 역시 이전처럼 사전 생성

![스크린샷 2024-04-30 오후 12.53.05.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6d4a6c9c-7168-49b2-8383-1bd212b2d8d4/ea5d9376-4848-40c0-8bb5-bfa1f03e14a1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-04-30_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.53.05.png)

**슬래시만 있는 페이지인 시작 페이지를 보자(index.js 파일)**

- 유효성 재검사 시간이 10초!
- 그리고 이 동적 페이지는 세 가지 인스턴스를 생성
  - 각각 p1, p2, p3 **getStaticPaths()에서 반환된 매개변수 값**이기 때문

## 📌 next 폴더에서도 볼 수 있음

server의 pages로 가면 다양한 매개변수에 대한 HTML 파일이 있음

링크를 통해 페이지를 이동하려는 경우 해당 데이터를 사전 로딩하는 JSON 파일도 볼 수 있음 (즉 초기 페이지 로딩 때가 아닌 우리가 그 페이지에 있을 때)

HTML 파일을 살펴보면 결국 여기 어딘가에서 Product 1의 텍스트를 볼 수 있음

## 📌 데이터를 사전 페칭하는 것도 볼 수 있음(index.js에서 몇몇 링크를 렌더링하니까)

`npm start`를 실행하여 로컬 머신에서 해당 빌드 프로젝트로 프로덕션 서버를 시작

개발자 도구를 열고 Network 탭으로 가서 localhost: 3000을 새로 고침하면 p1.json, p2.json 및 p3.json에 대한 요청이 있음

이걸 클릭하면 무엇이 페칭되었는지 알 수 있는데 링크를 클릭하면 **새로 고침 될 페이지에 대한 프로퍼티가 사전 페칭**되었음을 알 수 있음

마우스를 링크에 가져가기도 전에 데이터가 사전 페칭됨 (이미 페이지에 들어온 상태니까)

![스크린샷 2024-04-30 오후 12.57.16.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6d4a6c9c-7168-49b2-8383-1bd212b2d8d4/3a8d2426-ecc5-4105-b22d-24b052ea7ee7/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-04-30_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.57.16.png)

이제 링크를 클릭하면 **서버에 새로운 요청을 보내서 사전 렌더링 된 HTML 파일을 로드하는 게 아니라 싱글 페이지 애플리케이션에 계속 머무름**

초기 요청 이후, 로드하고 수화(hydrate)하는 React 애플리케이션에 있는거고 **그러고 나서 NextJS가 없는 일반 React 앱에서처럼 JavaScript가 새 페이지를 렌더링**

이 페이지에 필요한 데이터를 가져오는 곳은 미리 페칭된 JSON 파일인데 우리 대신 로딩하고 읽기를 함

그러면 우리가 페이지로 이동한 후 데이터를 페칭할 필요가 없음

따라서 최종적인 Product 1 페이지를 보여주기 위해 탐색할 때 데이터는 이미 훨씬 빠르게 존재하게 됨
