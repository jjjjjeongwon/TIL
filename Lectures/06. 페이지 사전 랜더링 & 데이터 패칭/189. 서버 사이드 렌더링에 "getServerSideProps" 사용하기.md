## 📌 pages 폴더에 user-profile.js라는 더미 파일을 생성

사용자 프로필 페이지로 쓸 컴포넌트를 추가하는 것! (`UserProfilePage`라는 함수 추가)

사용자에 대한 구체적인 데이터를 가져와 화면에 출력하는 게 목적

단, 이 페이지에는 사전 렌더링을 수행할 수 없음

- 어떤 사용자가 렌더링하는지를 먼저 파악해야 하기 때문

URL을 통해 사용자 ID를 유추할 수 있으니 이런 식으로 동적 라우팅 컴포넌트를 생성할 수 있음

- 하지만 그럴 경우, **이 ID로 브라우저에 접속한 사람들이 해당 사용자에 대한 데이터에 접근**할 수 있게 됨

우리는 전에 설정했던 쿠키를 이용해서 요청을 보낸 사용자가 누군지 확인하는 게 목적

현재는 어떠한 인증 절차도 추가하지 않은 상태, 사용자 컴퓨터에 어떤 쿠키도 저장하지 않았음

## 📌 이제 특정 사용자의 데이터를 반환해야 함

사용자 이름은 Max라고 해둠. 하지만 여기서 중요한 부분은 쿠키와 헤더가 든 요청 객체에 접근해서 어느 사용자가 요청을 보냈는지 알아내는 것

`getServerSideProps`의 전형적인 사용 사례

어느 사용자가 접근하는지도 모르고 쿠키에도 접근할 수 없으므로 이 페이지에 사전 렌더링을 수행할 수 없음

따라서 비동기 함수를 내보내야(export) 함 (바로 `getServerSideProps`라는 비동기 함수)

그리고 **콘텍스트(context)라는 객체 하나를 반환**해야 함

이 반환할 객체는 `getStaticProps`와 같은 포맷으로 설정해야 함

따라서 **객체 반환하는 부분은 똑같음. props 키는 필수고, notFound 키는 있어도 되고 없어도 됨. redirect 키도 마찬가지**, **revalidate 키만 주의**하면 됨

- 이 키는 필요하지 않을뿐더러 컴포넌트에 설정할 수도 없음
- 정의한 getServerSideProps 함수마다 **들어오는 요청에 전부 유효성 검사를 실행**하기 때문
- 따라서 일정 시간이 지나도 유효성 재검사를 실행할 필요가 없는 게 항상 실행됨

props를 객체로 내보냄 그리고 이 프로퍼티는 함수로 실행할 수 있게 됨

함수를 실행하는 주체는 여전히 Next.js

하지만, 앞서 말했듯이 프로젝트를 생성하기 전에 불러오는 게 아니라 요청이 들어올 때마다 불러오는 것

이제 username 프로퍼티를 쓸 수 있음. 지금은 Max라고 하드 코딩!

그리고 컴포넌트 함수에 props.username을 출력

저장한 후에 우리가 방금 추가한 **/user-profile 페이지로 이동하면 Max라는 글자가 표시**됨

getServerSideProps 함수가 잘 작동한다는 뜻(Max라는 값을 출력시키고 있으니까)

### 하지만 중요한 점은 이 함수는 배포된 서버와 개발 서버에서만 실행된다는 점

### 사전에 생성된 정적 함수는 아님
