NextJS가 제공하는 다양한 정적 함수를 살펴보기 전에

우선 getStaticProps()를 더 자세히 알아보겠습니다

보다시피 콘텍스트(context)라는 매개변수를 추가했어요

왜냐하면 이 함수는

NextJS에 의해 호출되고 인수를 받기 때문입니다

우리가 아직 거기까지 실행하지 않았을 뿐이죠

하지만 이렇게 객체를 얻고 있어요 이 객체는 인수이면서

NextJS로 실행될 때 페이지에 대한 추가 정보를 가진

매개변수라고 할 수 있습니다

예를 들어 동적 매개변수라던가

동적 경로 세그먼트 값을 얻는데 이건 나중에 다룰 내용이라

지금은 넘어가겠습니다

그 외에 다른 정보도 얻을 수 있지만

지금은 중요한 내용이 아니므로 그 부분도 넘어가도록 할게요

다음 강의에서 실제로 작동하는 콘텍스트를 보게 될 겁니다

지금은 이 return 객체를 자세하게 살펴보겠습니다

보다시피 props와 revalidate가 있는데요

이 객체에는 두 가지 키를 설정할 수 있습니다

하나는 notFound 키입니다

참 혹은 거짓의 불리언 값을 필요로 합니다

키를 true로 설정하면 페이지가 404 오류를 반환하며

일반 페이지 대신에 404 오류 페이지를 렌더링합니다

notFound: true를 추가하고 새로 고침하면 404 페이지가 나오죠

이 키를 사용하는 이유가 무엇일까요?

데이터를 페치하는 이 코드가

어떤 이유로든 페칭에 실패하면 그 작업을 할 수 있는데

if (data.products.length === 0)

즉, 상품이 없을 때만 getStaticProps() 안에

객체를 반환합니다 notFound를 true로 설정해서

notFound 페이지를 표시하는 겁니다

만약 페치된 데이터에서

상품이 하나라도 있으면 일반 페이지를 반환하죠

이것이 데이터 페칭에 실패했을 때 404 페이지를 렌더링하는

일반적인 사용 사례(use case)예요 이렇게 저장 후 새로 고침하면

다시 일반 페이지를 볼 수 있어요 물론 상품이 있으니까요

또한 우리는 redirect 키를 설정할 수 있습니다

redirect 키를 사용하면 사용자를 리디렉션할 수 있습니다

다시 말해 페이지 콘텐츠나 컴포넌트 콘텐츠를 렌더링하지 않고

다른 페이지, 즉 다른 라우트로 리디렉션하는 거예요

역시 데이터 페칭에 실패할 경우 필요한 설정입니다

예를 들어 데이터의 존재 여부는 둘째 치고

아예 데이터베이스 등에 액세스할 수 없다고 가정합시다

즉 상품이 없는 게 아니라 처음부터 데이터 자체가 없을 때

리디렉션을 실행하는 겁니다

여기서 반환되는 객체는 redirect 키입니다

destination로 설정할 라우트는

/no-data 이렇게 할게요 여기는 이 라우트가 없지만

여러분의 프로젝트에 있을 수 있겠지요

그러면 NextJS로 반환된 redirect 상태 코드를 통해

라우트가 로딩될 겁니다

이 페이지 컴포넌트는 리디렉션 될 필요가 없어요

지금은 두 가지 키를 사용할 일이 없지만

이러한 특별한 옵션에 대해 알고 계시는 것이 좋습니다

데이터 페치에 문제가 생겼을 때 유용하게 사용할 수 있으니까요

여기까지 getStaticProps를 충분하게 학습했습니다

이제 또 다른 중요한 사용 사례를 살펴보고

NextJS 프로젝트에서 자주 발생하는 중요 문제를 다루도록 하겠습니다

