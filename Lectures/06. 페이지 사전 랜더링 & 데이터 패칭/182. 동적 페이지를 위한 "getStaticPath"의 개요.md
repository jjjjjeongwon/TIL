# 왜 이런 오류가 생겼을까?

<img width="561" alt="스크린샷 2024-04-29 오후 3 15 13" src="https://github.com/jjjjjeongwon/TIL/assets/107834862/b05e2d59-2728-40e3-a7ed-e0e0c4539932">

### 에러 내용을 보면 해결책을 알 수 있지만 그 해결책을 사용해야 하는 이유는 이해되지가 않음

- 여기서 기억해야 하는 사실은 NextJS가 모든 페이지를 사전 생성한다는 것
- 기본적으로는 페이지를 사전 생성하는데 **동적 페이지에서는 그렇지 않음**
  (즉, **_컴포넌트 이름에 대괄호가 있을 때 해당 페이지로 연결되는 동적 세그먼트가 있는 경우_** **_기본 동작으로 페이지를 사전 생성하지 않음_** )

**왜 기본값이 아닐까?**

- 엄밀하게 따져서 이 페이지는 하나가 아니라 여러 페이지로 이루어지 때문
- 상품 ID마다 서로 다른 페이지에 프레임 및 HTML 콘텐츠는 같고 데이터만 다르게 구성되는 것임
- 이 페이지는 p1나 p2 p1000로도 로드될 수 있는데 NextJS는 사전에 동적 페이지를 위해서 **얼마나 많은 페이지를 미리 생성해야 하는지 알지 못함**([pid]에서 어떤 값이 지원되는지 알지 못함)
- 그런 것을 모르니 동적 페이지는 기본적으로 사전 생성되지 못하고 대신 서버에서 항상 그때그때 생성되는 것. **그래서 이전에는 작동했지만 지금은 getStaticProps를 추가한 상태라 작동하지 않음**
- 그리고 page 컴포넌트 파일에 이 함수를 추가한다는 것은 사전에 페이지를 렌더링하도록 NextJS에 요청하는 것과 같음
- index.js에서는 차이가 없었음 어쨌든 기본값이 있으니까. 하지만 동적 페이지에는 차이점이 생김. 앞서 이야기한 이유 때문에 기본값이 아니라서!
- NextJS는 **얼마나 되는 페이지가 필요한지 알 수 없고 우리에게 어떤 동적 세그먼트의 구체적인 값이 필요한지 모름**. 따라서 동적 라우트의 경우 NextJS가 더 많은 정보가 필요함
- 또한 우리는 NextJS에 어떤 경로가 생성되어야 하는지 동적 페이지에서 어떤 인스턴스가 사전 생성돼야 하는지 알려줄 수 있음. 여기서 데이터만 필요한 게 아니니까
- 또한 NextJS는 어떤 [id] 값이 사용 가능한지 어떤 동적 세그먼트 값을 사용할 수 있는지 알아야 함
- 그리고 어떤 값에 대한 페이지가 사전 생성되어야 하는지 알아야 NextJS가 그 페이지의 여러 인스턴스를 사전 생성할 수 있게 됨
- NextJS에 알려주려면 페이지에 추가할 다른 함수, 즉 페이지 파일에 추가할 수 있는 또 다른 함수를 사용함
  ### → 그게 바로 비동기 함수인 `getStaticPaths()`!
  - **wait 키워드를 사용**할 수 있고 **getStaticProps()처럼 page 컴포넌트 파일에만 추가할 수 있는 함수**
  - 다른 컴포넌트 파일에는 사용할 수 없음
  - 그리고 NextJS가 인지하도록 함수를 내보내기(export)

### 이제 이 함수가 어떻게 작동하고 어떻게 사용되는지 살펴보자!
