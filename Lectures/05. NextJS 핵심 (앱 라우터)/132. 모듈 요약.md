# 132. 모듈 요약

## App Router(앱 라우터)를 통해 NextJS의 주요한 요소들을 살펴봤다!

- app 대신에 파일 시스템을 이용하여 route (라우트)를 설정해 보았음
- page.js와 layout.js와 같은 특별한 파일명을 가진 파일을 사용해 봄
- 다른 특별한 파일들도 몇 가지 배움
  - 에러를 다루는 error.js 파일
  - not found 에러를 다루는 not-found.js 파일
  - 화면에 로딩 상태를 보여주기 위해 사용했던 loading.js 파일
- suspense를 사용한 더욱 세분화된 제어 또한 배웠고 이 곳에 사용
- path 세그먼트를 미리 알 수 없는 경우에 동적 라우팅을 구성하는 법
- 기본적으로 서버 컴포넌트. 서버 컴포넌트는 서버 측에서 실행이 되고 서버 측에서 렌더링 됨
  - 그러나 명시적으로 이런 동작에서 벗어날 수 있음
- use client 디렉티브를 이용하여 파일과 그 컴포넌트를 클라이언트 컴포넌트로 변환하면 클라이언트 측에서 렌더링되고 그리하여 useState 또는 사용자 이벤트 관리와 같은 클라이언트 측 기능을 사용할 수 있게 됨
- 서버 컴포넌트의 이점의 활용에 대해서도 배웠는데 컴포넌트 안에서 직접 데이터를 가져오는 것!
  - useEffect를 사용해 요청을 따로 백엔드에 보낼 필요가 없이 서버 컴포넌트 안에 바로 데이터를 가져오면 된다
- Server Actions와 async 함수에 대해서도 배움
  - 이들을 사용하기 위해서는 함수 안이나 파일의 맨 위에서 use server 지시어를 사용해야 함
  - 그리고 Server Actions의 특별한 점은 form 요소의 action 속성에 할당할 수 있다는 것(직접적 or useFormState를 사용해서)
- useFormState는 react-dom이 제공하는 훅으로 Server Action 기능이 반환하는 응답을 다루거나 그 응답을 기준으로 UI를 변경할 수도 있음
- Server Actions을 기준으로 한 변경으로 useFormStatus 훅 또한 배움
  - 이 훅은 현재 form이 제출되고 있는지의 여부를 알아내는 데 사용되고 이에 따라 UI를 변경하는데 사용될 수도 있음
- 이 모든 것과 연관되어서 NextJS가 꽤 공격적인 캐싱을 한다고 배웠음
  - 그러므로 revalidatePath를 호출하여 데이터가 변경될 때 마다 가장 최신 데이터를 가져와서 페이지에 나타낼 수 있게 해야 함
- 또한 배포 환경에서 앱을 테스트하지 않으면 위험할지도 모른다는 것을 배웠음
  - 우리 앱 또한 개발 환경에서는 잘 동작했지만 배포 환경에서는 데이터를 찾지 못했음
- 마지막으로 metadata에 대해서도 배움
  - 정적 메타데이터로 페이지에 지정될 수 있고 여기에 했던 것처럼 동적으로 만들 수도 있음
