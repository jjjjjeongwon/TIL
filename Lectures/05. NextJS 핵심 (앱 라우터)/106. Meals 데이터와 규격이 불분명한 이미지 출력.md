시작 페이지

커뮤니티 페이지와 헤더도 개선하였고

마침내 meals 페이지와

몇 가지의 meals를 출력할 때가 되었습니다

그러고 난 후 우리는

사용자가 식사를 공유할 수 있도록도 할 것입니다

이를 위해 우리는 meals 폴더의

page.js 파일에서 작업할 것입니다

거기서 저는

곧 데이터베이스에 저장할

여러 가지 식사를 출력하고 싶습니다

그것을 하기 전에

이 페이지의 기본 마크업

즉, 기본 구조라고도 부를 수 있는 것을 먼저 설정해봅시다

여기에 다시 header 섹션과

그 아래 이 페이지의 메인 섹션을 넣고 싶습니다

저는 또 다시 몇 가지의 스타일을 준비했습니다

따라서 첨부된 것에서

여러분은 page.module.css 파일을 찾을 수 있고

이 meals 페이지를 위한 page.module.css 파일을 찾을 수 있습니다

그리고 우리는 이 page.module.css 파일을

특별한 css 모듈 불러오기 구문을 활용하여 불러오기로 합니다

따라서 우리는 이 파일 내의 css 클래스를 접근할 수 있습니다

왜냐하면 여기 예를 들어서

이 헤더에 추가되어야 할 클래스가 있습니다

다음과 같은 헤더 클래스 말입니다

저는 또한 메인 섹션에 클래스를 추가하고 싶습니다

그리고 그것은 여기 있는 메인 클래스 입니다

그런 다음 헤더 내부에

표시된 h1 요소와

span을 가지고 싶습니다

그리고 저는 그 span에 추가적인 스타일링을 위해

그 span에 클래스를 할당하고 싶습니다

정확히 말하면 이렇게 하고 싶습니다.

이 h1 요소 아래 우리는 몇 가지의 임시 텍스트를

출력할 paragraph를 추가합니다

예를 들어 'Choose your favorite recipe (제일 좋아하는 레시피를 골라서)

and cook it yourself (스스로 요리해 보세요)

It is easy and fun' (간단하고 재밌답니다)

물론 여러분은 원하는 무엇이든 출력할 수 있습니다

이제 이 paragraph 아래에 저는 또 다른

className cta(call to action)을 받는

paragraph를 추가하고 싶습니다 왜냐하면

거기에 next/link 컴포넌트를 사용하여 링크를 만들고 싶기 때문입니다

따라서 당연히 이것 또한 늘 하던 것처럼

불러오기 됩니다

저는 share page를 링크하기 위하여

Link 컴포넌트를 사용합니다

따라서 /meals/share는

사용자가 이후에 사용할 수 있는 페이지로

커뮤니티와 그들의 식사를 공유하는 곳입니다

그렇기에 Share your favorite recipe (최애 레시피 공유)라 하겠습니다

이제 이것이 이 MealsPage의 헤더입니다

우리는 물론 이것을

여러분이 원한다면 개별의 컴포넌트로 넣을 수 있습니다

단지 필수적인 스타일을 함께

가지고 오도록 하면 됩니다

여기 저는 하나의 컴포넌트로 유지하겠습니다

그러나 저는 meals를 출력하는 데 있어서는

개별 컴포넌트를 추가하겠습니다

이를 위해 root components 폴더로 돌아가서

저는 meals라는 서브폴더를 추가하여

meal 관련된 컴포넌트를 모두 저장하겠습니다

여기에 add a meals-grid.js 파일을 추가합니다

이 meals-grid.js 파일의 목적은

그리드에 여러 가지의 식사 아이템을 출력하는 것입니다

따라서 당연히

우리는 컴포넌트 함수를 내보내기 하는 것으로부터 시작하겠습니다

MealsGrid라고 이름 붙이겠습니다

속성으로 이곳에 출력되어야 할

meals를 기대합니다

그리고 나서 주문되지 않은 리스트를 출력합니다

그 리스트 안에 저는 모든 식사를 매핑하여

모든 식사에 리스트 아이템이 출력될 수 있습니다

이제 여기 모든 리스트 아이템은 키가 필요합니다

키는 meal.id라 할 수 있는데

왜냐하면 모든 meals은 id가 있기 때문입니다

리스트 아이템 내에서

저는 meal 아이템의 세부 정보를 출력하고 싶습니다

그것을 작업하기 전에

저는 또 css 파일을 준비했습니다

여러분이 찾을 수 있는 첨부되있는 파일 meals-grid.module입니다

그런 다음 .module.css 파일들과 마찬가지로

meals-grid.js 파일로 가져와서

여기에 unordered list에 meals라는 클래스를

추가할 수 있도록 하려고 합니다

그리고 이제 저는 또 다른 컴포넌트를 여기에 추가하려고 합니다

meal-item.js 파일입니다

또 첨부되어있는

meal-item.module.css 파일을 준비하였습니다

첨부된 것에서 여러분은 완료된 meal-item.js 파일을 찾을 수 있고

이것은 상대적으로 명확한 컴포넌트로

단순히 여러 가지의 props 허용하고

구조화된 방법으로 그런 props를 출력합니다

이 컴포넌트의 흥미로운 점 하나는

하나는 특정 식사 세부 정보 페이지로

이동하는 링크를 가지고 있다는 것입니다

여기 그 경로는 다이나믹하게 주입된 세그먼트로

동적으로 구성되어있습니다

이것은 각 식사마다 다르며

이유는 우리에게는 동적인 식사 세부 정보 페이지가 있기 때문입니다

여기 이 페이지는 그 경로 세그멘트에 대해

동적인 값을 기대하고 있으며 따라서

우리는 각각의 다른 식사에 대해서 세부 정보 페이지를 방문할 수 있습니다

결론은 이 경로를 만들 때

여기 이 동적 slug가

각각의 식사마다 다르고

이 플레이스홀더의 구체적인 값으로 사용됩니다

따라서 이것이 이 컴포넌트의 한 가지 흥미로운 점이고

이것은 다른 식사 정보 페이지로 우리를 연결시켜줄

동적 링크들을 가지고 있습니다

다른 흥미로운 점은 이 image 컴포넌트입니다

바로 이 next/image 컴포넌트입니다

이 부분에서 흥미로운 점은

여기서 출력하는 이미지들이

이제 수동으로 assets 폴더에서 가져오지 않을 것이라는 것입니다

대신에 우리는 데이터베이스에 저장된

meals를 가지고 작업하고

그 이미지들은 public 폴더에 저장되어있습니다

이것들이 assets 폴더에 있는 것과 같이

같은 이미지인 것 같지만

그것은 단순히 우연입니다

나중에 사용자들은 그들의 사진을 업로드할 수 있고

그들의 식사를 공유할 수 있다는 것은

우리가 image 컴포넌트를 사용할 때

명심해야 할 점입니다

왜냐하면 이 image 컴포넌트는

이미지의 기본 폭과 높이를 알아야 하는

이미지 처리 작업이 필요합니다

스크린에 원하는 폭과 높이가 아니라

여러분이 렌더링 하고자 하는 이미지의

폭과 넓이입니다

image 컴포넌트를 활용하면

다음을 자동으로 감지할 수 있는데

이것은 헤더에서 로고처럼

로컬 파일 시스템에서 가져온 이미지에 적용한 것처럼

이미지에 적용했습니다

그 상황에서는

Next.js는 폭과 넓이를 찾을 수 있습니다

그러나 이 meal 아이템들의 경우

우리는 그것을 데이터베이스로부터 동적으로 로드합니다

그러고 나면 데이터베이스에

몇 가지의 이미지를 지정하는 경로를 가지고

Next.js는 다음과 같은 이미지

즉 동적이게 로드되거나 해결된 이미지의

폭과 넓이를 해결할 수 없습니다

왜냐하면 간단하게 정보가

빌드 시간에 이용가능하지 않고

모든 가져온 이미지에 해당되는 것처럼

런타임에서만 해당되기 때문입니다

따라서 그것이 제가 여기에 특별한 fill 속성을 추가하려는 이유입니다

대안으로는 여기에 출력될 이미지의

너비와 높이를 명시적으로 설정하는 것이었지만,

사용자가 공유하는 이미지도

다뤄야 하기 때문에

사전에 알 수 없습니다

그런 시나리오에서는 fill이 대안입니다

이것은 Next.js에

이 가능한 공간을 부모 컴포넌트에 의해 정의된

이미지들로 채워야 함을 알려줍니다

적절한 css 스타일을 설정하여

이것이 좋아보이도록 만듭니다

이것을 여기서 언급하는 이유는

물론 이미지의 크기를

사전에 알 수 없는 경우가

흔한 시나리오이기 때문입니다

그런 상황에서는 fill은 최고의 대안으로

폭이나 넓이를 명시적으로 설정하는 대신

미리 폭이나 넓이를 알고 있다면

그렇게 설정하는 것이 좋습니다

따라서 추가된

meal item 컴포넌트로

우리는 이 MealsGrid 컴포넌트에 출력할 수 있습니다 컴포넌트에서

따라서 여기 li 태그 사이에

다음과 같이 MealsGrid 컴포넌트를 출력합니다

그리고 여기서 가지고 있는 그 meals에서

MealItem으로 모든 이 식사 속성들을 간단히 전달하겠습니다

따라서 이 문법을 활용하여

이 meal 객체의 properties을 끌어내고

스프래드 연산자를 통해 넣겠습니다

이 MealItem 끝에 property로 말입니다

그리고 여기서 얻는 meal 여기에서

즉 나중에 meals 배열에 가질 meal들은

이 properties로 기대되는

properties을 가지게 될 것이기 때문에

이 접근 방식은 아주 잘 작동할 것입니다

물론 현재 우리는 데이터베이스가 아직 없기에

화면에서 아무것도 볼 수 없습니다

그러나 우리는 이 MealsGrid 컴포넌트를

가지고 와서

meals 폴더의 page.js 파일로 와서

여기에 출력합니다

현재는 빈 배열에 meals를 설정합니다

왜냐하면 언급했듯이 아직 식사가 없기 때문입니다

저장한 후 Browse meals (식사 보기) 페이지로 가면

우리는 헤더를 볼 수 있고

이것은 우리가 그 share meal (식사 공유) 페이지로 갈 수 있도록 합니다

그러나 우리는 아직 식사를 볼 수 없고

그것이 우리가 다음으로 추가할 것입니다
