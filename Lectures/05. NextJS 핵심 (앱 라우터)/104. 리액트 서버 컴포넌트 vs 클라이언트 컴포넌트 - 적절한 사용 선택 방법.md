# 104. 리액트 서버 컴포넌트 vs 클라이언트 컴포넌트 - 적절한 사용 선택 방법

### 📌 creat React app이나 Vite의 도움을 받아 만드는 모든 바닐라 리액트 앱

- 기본적으로 클라이언트 컴포넌트를 사용
  - 왜냐하면 그런 프로젝트들에서 React.js는 **순수한 클라이언트 사이드 라이브러리로 브라우저에서 클라이언트 측에서 코드를 실행**하기 때문!

### 📌 NextJS에서는

- **Next.js는 풀스택 프레임워크**이기 때문에 프론트엔드 뿐 아니라 백엔드가 있고 따라서 Next.js와 작업할 때 코드는 백엔드에서도 실행
- 예를 들어서 기본적으로 Next.js 프로젝트에서 가지고 있는 모든 리액트 컴포넌트들은 그것들이 페이지인지, 레이아웃인지, 기본 컴포넌트인지에 상관없이 오직 서버에서만 렌더링 됨
  - 이것이 바로 그들이 리액트 서버 컴포넌트라 불리는 이유!

> **_테스트를 해보면?_**

![스크린샷 2024-01-23 오후 11.29.43.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6d4a6c9c-7168-49b2-8383-1bd212b2d8d4/41e1fafd-089b-4ffc-8732-747b13fce5c7/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-01-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_11.29.43.png)

- `MainHeader` 컴포넌트에 콘솔을 기록하면 브라우저 개발자 툴을 열면 실행 로그를 확인할 수 없음
  - 왜냐하면 **MainHeader 컴포넌트는 절대브라우저에서 실행되지 않고 대신에 서버에서 실행**되기 때문
- 개발자 서버를 시작하는 터미널을 열면 서버 사이드 코드가 돌아가고 있고 여기서 실행중인 로그를 볼 수 있음
- 이곳이 컴포넌트들이 실행되는 곳

> **_초기 페이지를 로드할 때만의 사례가 아니라 이후의 내비게이션에도 같다?_**

- 예를 들어 이 `Meals page`에 무엇인가를 로그하고 explore meals 를 눌러 meals page로 넘어가길 원한다면 여기에서 또한 로그를 볼 수 없음
- 그 링크를 사용했고 따라서 새로운 페이지를 만든 것이 아니라 단일한 페이지 애플리케이션에 머물렀음에도!
- 이런 상황이더라도 백엔드 로드에서 볼 수 있음
  - 이런 상황의 이유는 단일 페이지 애플리케이션 모드에 있고 움직이고 있더라도 **모든 컴포넌트는 아직도 백엔드에서의 서버에 렌더링** 되고 결국은 이것은 이곳에서 렌더링 되도록 **클라이언트에 보내지는 완성된 html 코드 같은 것**이기 때문!

### 💡 이는 Next.js 프로젝트의 중요한 장점!

- 왜냐하면 서버 컴포넌트를 사용하면 다운로드해야 하는 클라이언트 측의 자바스크립트 코드가 줄어들 수 있어웹사이트의 **성능을 향상**시킬 수 있음
- **검색엔진 최적화**에도 좋음
  - 웹 검색 크롤러들은 이제 완성 컨텐츠를 포함하는 페이지들을 볼 수 있기 때문
- 일반적인 자바스크립트 프로젝트와 비교해보면,
  - 페이지의 소스 코드를 보면 본질적으로는 비어있는 것을 확인할 수 있음
  - 왜냐하면 모든 내용은 클라이언트 측 코드와 클라이언트 측 컴포넌트의 도움으로 클라이언트 측에서 생성되고 채워지기 때문
- Next.js에서는 프로젝트의 상태가 다르게 나타남
  ![스크린샷 2024-01-23 오후 11.32.54.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6d4a6c9c-7168-49b2-8383-1bd212b2d8d4/c8f725b7-8273-4be7-b3c9-96a6bb5c646b/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-01-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_11.32.54.png)
  - 소스 코드를 살펴보면 모든 컨텐츠가 다 있음
  - 스크린에 보여지는 모든 텍스트는 실제 페이지 소스코드의 일부분이고 웹 검색엔진 크롤러들이 보는 것들이기도 함

### 📌 그러나 Next.js 프로젝트에서 클라이언트 컴포넌트도 만들 수 있다!

- 기술적으로 서버에서 아직 사전 렌더링 되는 것들이고 잠재적으로는 클라이언트에 렌더링될 수 있음
- 더 중요하게 이 컴포넌트들은 클라이언트에 무조건 렌더링 되야 하는 것으로 이유는 클라이언트에만 사용가능한 코드나 기능을 포함하기 때문!
  - 예시 1) `image-slideshow.js` 파일에서 useState 훅이나 useEffect 훅을 사용하고 있는데, 이 훅들은 서버 측에서는 사용 불가한데 이 **interval (간격)을 이 브라우저를 실행해서 페이지가 로드된 후에 이미지가 5초마다 변경**되길 원하길 때문
  - 예시 2) **eventHandler**
    onClick 속성을 활용하여 몇 가지의 함수를 촉발하면 어떤 **사용자 상호작용을 기다리고 있기에** 이는 클라이언트에서 실행되는 코드가 필요하므로 클라이언트 컴포넌트여야 함

**클라이언트 컴포넌트를 만들고 싶다면?**

- Next.js에게 컴포넌트를 잡고 있는 파일 위에 `use client 지시어`를 사용하면 useClient 사이트 기능을 컴포넌트 내에 사용할 수 있도록 함
