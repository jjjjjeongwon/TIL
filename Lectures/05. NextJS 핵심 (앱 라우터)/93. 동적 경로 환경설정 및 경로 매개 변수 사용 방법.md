이제 라우트를 설정하고

일반 컴포넌트를 사용하는

탄탄한 기반을 갖췄으니

식사 앱을 시작하기 전에

함께 탐구하고 싶은

라우트 종류가 하나 더 있습니다

여기에 블로그 라우트를 추가하고 싶다고 가정합시다

물론 app 디렉토리에 blog 폴더를 만들 수 있고

거기에 page.js 파일을 넣을 수 있습니다

그러나 여기에 블로그 게시물을 추가하고 싶다고 합시다

blog 폴더에 중첩되어

post-1 폴더, post-2 폴더 등을 만들 수 있습니다

당연히 어떤 결과가 나오지 않습니다

데이터베이스에 새로운 블로그 게시물이

생기거나 저장될 때마다 새로운 폴더를

추가한다는 의미인데 확장 불가능하고

관리도 불가능합니다

그러므로 여기에 필요한 것은

dynamic route (동적 라우트)입니다

정의를 단 한 번하는 라우트인데

다양한 페이지와 다양한 블로그 게시물을

렌더링 할 수 있습니다

NextJS에서 이런 dynamic route (동적 라우트)는

대괄호를 사용한 중첩 폴더를 추가해 만들 수 있습니다

NextJS에서 지원되는 특수한 문법으로

대괄호 사이에

임의로 식별자를 넣을 수 있습니다

slug 같은 이름을 자유롭게 작성해도 됩니다

이 임의로 지은 이름은 나중에 중요해집니다

그리고 또 page.js 파일이 필요합니다

내용을 렌더링하고 싶기 때문입니다

방문 가능한 새로운 페이지를 만들고 싶다면

page.js 파일이 필요합니다

직접 blog 폴더에 있는

page.js 파일에서 바로 시작합니다

BlogPage라는 컴포넌트를 export하여

main 태그를 반환하여

'The Blog'라고 쓸 수 있습니다

여기에 두 문단 정도를 넣고

블로그 게시물 링크를 넣습니다

따라서 링크 컴포넌트를 사용해

'next/link'에서 Link를 import합니다

여기에 한 개의 블로그 게시물의 주소를

'/blog/post-1'로 하고

두 번째는 링크는

Post 2로 이어지게 합니다

거의 동일한 경로지만

끝이 다릅니다

slug 폴더의 page.js file에 들어가

대괄호의 slug 폴더입니다

여기에도

컴포넌트 함수를 export합니다

블로그 게시물 페이지를 예로 들 수 있습니다

여기서 다시 main 태그를 반환하고

'Blog Post'라고 적는데 나중에 역동적으로 만들 것입니다

이제 모두 저장합니다

돌아가서 '/blog'에 접속하면

이 두 개 링크가 있습니다

클릭하면

블로그 게시물 페이지로 이동합니다

링크 둘 다 마찬가지입니다

보시다시피

URL이 변경됩니다

여기에 '/blog' 다음에 'post-2'이 있고

다른 링크에는 'post-1'이 있습니다

동일한 page.js 파일이 활성화됐지만

다른 분할 값이 있는 것입니다

즉 다른 경로 분할 값입니다

이와 같은 결과는

dynamic route (동적 라우트) 문법에 의해 나온 것입니다

여기 대괄호는 NextJS에게

어떠한 경로 분할을 원하지만

이 경우에는 blog 다음을 의미합니다

다만 아직 정확한 값을 모른다는 것입니다

이 임의 값 slug라는 식별자는

경로에 값이 실릴 때

정확한 값에 접근할 수 있도록합니다

NextJS는 props 객체를

모든 페이지 컴포넌트에 넘깁니다

이 모든 페이지 컴포넌트는 프로퍼티가 있는데

구조 분해 할당을 통해 뽑아 낼 수 있습니다

이는 params prop이며

NextJS에서 설정됩니다

수동으로 전달할 필요 없는데

이 컴포넌트를 수동으로 렌더링하는 것이 아니기 때문입니다

NextJS에서 대신 해주고

prop을 대신 설정 해줍니다

이 params prop 안에는 무엇이 있을까요?

dynamic route (동적 라우트)에 임의로 넣은

모든 이름이 있는 객체가

키입니다

이 키 아래 저장된 값이

URL에 인코딩된 정확한 값입니다

예를 들어 'post-1'입니다

이제 이 페이지에

params.slug를 접근하여

출력하면

이제 여기에 'post-1'이 보입니다

여기에 'anything-else'를 입력하면 'anything-else'가 보입니다

아주 좋은 기능입니다

블로그 게시물이 저장된

데이터베이스에 접근해

slug로 블로그 게시물을 불러와

페이지에 내용을 보여줄 수 있는 것입니다

이렇게 dynamic route (동적 라우트)를 설정할 수 있습니다

NextJS에는 훨씬 더 많은 기능이 있습니다

커스텀된 not found page (알 수 없는 페이지) 또는 found page (찾을 수 있는 페이지)를 만들 수 있고

오류를 해결하고, 페이지를 추가하고, 데이터를 불러오고, 데이터를 바꾸는 등

다양한 것을 할 수 있으며 데모 프로젝트 말고

예전에 보여드린 식사 앱에서 할 예정입니다
