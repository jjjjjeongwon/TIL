# 111. 오류 처리 방법

## 📌 이름이 정해진 특정 컴포넌트 중 error.js 파일도 있음

- 페이지나 컴포넌트가 생성할 수도 있는 잠재적인 에러들을 다룰 것
  - 예를들어 어떤 데이터를 로딩하는것을 실패하거나, SQL 데이터베이스에선 웬만하면 없는일이지만 원격 데이터 서버이거나 혹은 다른 것이 잘못된다고 하면 있을 수 있는 일 등
- 시뮬레이션 해보기 위해 `Meal.JS 파일`에 있는 `Lib 폴더`로 가서 에러를 던지고 error.js 파일을 지움
  - 이제 페이지 새로고침을 하면 데이터 로딩이 되고 에러가 뜸
  - 보이는 에러 화면은 에러의 개발 버전, 배포 버전에서는 다르게 보일 것
  - 개발 환경에서는 이 스크린을 보여주는것이 개발자로서 에러를 쉽게 찾고 고치기 편함
  - 그러나 배포 환경에서는 다르게 보이게 됨
  - 그렇기 때문에 **어플리케이션에 에러 handling을 추가하는것이 좋음**

## 📌 방법은?

- `error.js 파일`을 추가하고 그 안에 컴포넌트를 셋업하여 에러가 일어날때마다 NextJS 가 렌더링 하게 함
- 하지만 이것은 이 `error파일`과 **같은 폴더에 있거나 중첩된 페이지나 레이아웃에서 발생하는 오류만 처리**하게 됨
- 그러니 이것을 애플리케이션의 root 레벨에 심어서 그 어떤 페이지의 어떤곳에서 일어나는 에러도 잡을수 있게 필요한만큼 세분화 하면 됨
  - 여기서는 한 단계만 내려가서 사이트 전체가 에러 스크린으로 바뀌지 않고 부분적으로만 바꾸게 함
- 오류에 대해 더 알려면 이 에러 페이지에서 몇가지 속성을 사용 할 수 있음
  - 왜냐하면 오류나 JS파일에서 그런 컴포넌트를 설정할 때 NextJS는 해당 컴포넌트에 일부 props을 전달하기 때문
  - 제일 중요한것은 여기서 제공되는 error 속성이 이 오류에 대한 정보를 더 가지고 있을 수 있다는 것
- 이제 실제 오류 메세지는 NextJS에 의하여 숨겨짐
  - 그렇게 해서 보여지지 않아야 할 정보는 엔드유저 (최종 사용자)에게 노출되지 않게 됨
- error가 Error 코드나 비슷한것을 가진 객체라면 그것을 여기 이 컴포넌트에 사용하여 조금 더 상세한 오류 메세지를 띄울 수 있음
- **error.js는 클라이언트 컴포넌트가 되어야 함**
  - NextJS는 기본적으로 클라이언트 측에서 발생하는 오류를 포함한, 해당 컴포넌트의 모든 오류를 잡을 수 있도록 보장하기 때문
