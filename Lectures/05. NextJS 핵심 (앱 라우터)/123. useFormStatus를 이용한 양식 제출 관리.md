# 123. useFormStatus를 이용한 양식 제출 관리

# 📌 사용자 경험을 개선시킬 차례

> 예를 들어, 현재는 데이터를 추가한 뒤 리다이렉트되기 까지 시간이 다소 걸림
> 실제 배포 단계에서는 일반적으로 빠른 동작이지만 데이터가 제출되는 동안 **정상적으로 동작하고 있다는 것을 보여주는 어떤 피드백**이 있다면 사용자로서 더욱 좋을 것!
> _버튼을 클릭하면 버튼이 바뀌어서 요청이 진행중인 것을 알려준다던지_

## 📎 useFormStatus 훅

- 이 훅은 `react-dom` 에서 `useFormStatus`를 import 하여 사용
- 이를 통해 status 객체를 받을 수 있으며 **요청이 진행중이면 true이고 아니면 false인 pending 속성**을 가지고 있음

**🚫 그러나 이 훅을 추가하면 에러가 발생**

- 이 훅은 클라이언트 컴포넌트에서 동작할 수 있는데 왜냐하면 이 훅이 **진행 중인 요청에 따라 클라이언트 측의 UI를 변경할 것 이기 때문**
- 그러므로 `'use client'`를 추가해야 함

**💡 하지만** **조건에 따라 바뀌는 버튼 하나 원한다고 이 전체 페이지를 클라이언트 컴포넌트로 바꾸고 싶지는 않음**

- 게다가 이 훅은 status를 받기를 원하는 form의 안에 있을 때에만 form의 status를 받을 수 있음
- 그러므로 form 안에 있어야 이 form의 제출 status를 알 수 있음. (form 안의 어떤 컴포넌트 안)

**💡 components 폴더 아래의 meals 폴더에 새로운 컴포넌트를 만듦(`meals-form-submit.js`)**

- 이 파일에서 `useFormStatus`훅을 import 하고 `‘use client’` 지시어를 추가
- 그러면 이렇게 `useFormStatus`를 호출하여 status(다양한 속성을 가지고 있는 객체)를 얻을 수 있음
- 객체 구조 분해 할당을 통해 필요한 한 가지 속성만 추출할 수 있음
  - **pending 속성** 추출
- pending이 true라면 'Submitting...'(제출 중...) 이라는 문자를 아니라면 Share Meal (식사 공유)라는 문자를 출력
  ```jsx
  {
    pending ? "Submitting..." : "Share Meal";
  }
  ```
- 추가로 제출 중이라면 버튼을 비활성화
