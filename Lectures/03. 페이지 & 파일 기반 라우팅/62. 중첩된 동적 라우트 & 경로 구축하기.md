# 63. Catch-All 라우트 추가하기

**중첩된 동적 세그먼트**는 동적 라우트에 있어서 Next.js를 이용한 라우팅의 중요한 요소 중 하나!

→ 두 번째 확장식 혹은 변형식은 모든 라우트를 한 번에 확보하는 방식

![스크린샷 2023-11-19 오후 9.23.32.png](63%20Catch-All%20%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%90%E1%85%B3%20%E1%84%8E%E1%85%AE%E1%84%80%E1%85%A1%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20ff9241d07d604b78a452c283cc2278d7/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-19_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.23.32.png)

## 📌 위와 같이 하위 폴더인 blog가 있다고 가정했을 때, 블로그 게시물을 불러오는 방법?

### 1. 블로그 게시물의 ID인 슬러그를 이용하는 방법  → `[id].js`파일을 추가

![스크린샷 2023-11-19 오후 9.24.58.png](63%20Catch-All%20%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%90%E1%85%B3%20%E1%84%8E%E1%85%AE%E1%84%80%E1%85%A1%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20ff9241d07d604b78a452c283cc2278d7/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-19_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.24.58.png)

- 블로그 게시물 하나를 불러오는 또 다른 URL도 지원해야 함
- `/blog/the-id-of-a-post`를 지원한다고 가정했을 때, `/blog/2020/12/the-id-of-a-post` 과 같은 URL도 지원
    
    → 2020년 12월에 올라온 게시물만 검색하는 경우
    

### 2. Catch-all 라우트를 이용

![스크린샷 2023-11-19 오후 9.24.48.png](63%20Catch-All%20%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%90%E1%85%B3%20%E1%84%8E%E1%85%AE%E1%84%80%E1%85%A1%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20ff9241d07d604b78a452c283cc2278d7/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-19_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.24.48.png)

- `/blog/2020/12`만 입력해서 해당 연도의 특정 달에 올린 게시물을 모두 불러오는 것도 가능
- 파일 이름으로 중괄호와 식별자만 작성하지 않고 구문이나 특수한 표기법을 추가
- **JavaScript의 스프레드 연산자 같은 마침표 세 개(...)를 입력**하고 이름은 id, slug등 직접 지어서 사용
- **운영 체제의 눈에는 특별할 게 없는 파일 이름이지만 Next.js의 눈에는 특별한 이름임**

```jsx
import { useRouter } from "next/router";

function BlogPostsPage() {
  const router = useRouter();
  console.log(router.query);
  return (
    <div>
      <h1>The Blog Posts</h1>
    </div>
  );
}

export default BlogPostsPage;
```

- `useRouter`를 임포트(import)하고 `router.query`를 확인하기 위해 `/blog/2020/12`으로 이동하면 '블로그 게시물' 페이지가 뜨고 아래와 같이 콘솔창의 내용을 확인할 수 있음

![스크린샷 2023-11-19 오후 9.14.24.png](63%20Catch-All%20%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%90%E1%85%B3%20%E1%84%8E%E1%85%AE%E1%84%80%E1%85%A1%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20ff9241d07d604b78a452c283cc2278d7/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-19_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.14.24.png)

- **쿼리 객체, slug 프로퍼티**가 있음
    
    → 마침표 세 개 뒤에 slug를 작성했기 때문임
    
    → **이전에는 항상 단일 값인 단일 문자열만 나타났지만 이번에는 확보한 각 세그먼트의 문자열을 배열**로 나타남
    
    → 첫 세그먼트로 2020이 있고 다음으로 12가 있음 URL 안에서 **슬래시로 구분!**
    
- 마침표 세 개를 통해 해당하는 경로를 모두 렌더링하도록 정의했기 때문에 Next.js는 `/blog` 뒤에 무엇이 붙든 페이지를 렌더링
- `/blog/` 형식의 모든 URL을 페이지 컴포넌트가 처리하고 router 객체 내 query 객체에 있는 slug 프로퍼티를 통해 활용할 수 있는 배열도 생성
    
    → 이 값들은 데이터베이스에 요청을 보낼 때 사용하거나 2020년 12월에 올린 블로그 게시물을 필터링할 때 사용도 가능