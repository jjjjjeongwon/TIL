> Next.js 파일 중에서 오로지 \_app.js 파일로만 전반적인 애플리케이션 설정을 할 수 있는 건 아님

## 💡_document.js 파일을 생성해서도 설정할 수 있음

\_document.js도 \_app.js처럼 **하위 폴더가 아닌 pages 폴더의 루트 레벨에** pages 폴더에 추가해야 함

기본으로 생성되어 있진 않지만 직접 생성해주면 Next.js가 알아서 인식해 사용

## \_document.js가 뭘까?

\_app.js는 애플리케이션 셸(Shell).

\_app.js는 HTML 문서의 body 섹션 속 루트 컴포넌트라고 생각하면 됨.

\_document.js는 전체 HTML 문서를 커스터마이징할 수 있게 해줌. (HTML 문서를 구성하는 모든 요소)

그렇게 하려면 \_document.js 파일을 생성하고 거기다 특수한 컴포넌트를 추가해줘야 함

- 클래스 기반(Class-based) 컴포넌트 (여기서 이름은 MyDocument)
- 클래스 기반 컴포넌트여야 하는 이유는 Next.js가 제공하는 일부 구성요소 확장이 필요하기 때문

```jsx
import Document from "next/document";
```

- 그리고 여기서 문서를 확장해줌 → 그래서 클래스 기반 컴포넌트를 쓰는 것
- 이 클래스 기반 컴포넌트 내부에는 render 메서드가 필요함
  - 클래스 기반 react 컴포넌트에서 했던 것
- 그리고 JSX 코드를 반환해주는데 이 또한 특수한 구조를 가진 특수 JSX 코드여야 함
- 그러려면 next/document에 더 많은 컴포넌트를 임포트해야 함
- Html 컴포넌트, Head 컴포넌트 Main 컴포넌트와 NextScript 컴포넌트

여기서 임포트하는 Head 컴포넌트는 next/head에서 임포트하는 Head 컴포넌트와는 다름

next/head의 Head는 렌더링된 페이지의 Head 콘텐츠를 조정하기 위해 JSX 코드 어디서나 사용됨

next/document의 Head는 우리가 여기에 직접 구축할 특수한 문서 컴포넌트에만 사용됨

렌더링된 JSX 콘텐츠에서 임포트되는 그 컴포넌트를 사용해 <Html> 요소로 래핑된 JSX 구조를 반환해야 함

이렇게 <Head> 요소가 있고 그리고 <body> HTML 요소가 있음

특별한 건 아니고 그냥 평범한 <body> 요소

그리고 그 안에 <Main>과 <NextScript>가 들어감

이게 꼭 필요한 기본 구조

- 달리 오버라이드하지 않는다면 이게 문서가 가지는 기본 구조가 됨

오버라이드하려면 해당 구조를 다시 만들어야 함

또한 문서를 기본값으로 내보내야 함

### 기본 문서를 오버라이드하는 이유는 뭘까?

예를 들어 일반 문서를 설정한다고 하면 <Html>에 lang 속성을 추가하고 en으로 설정하면 됨

그렇게 하지 않고 저장한 후 새로 고치면 렌더링된 <html> 요소에서 lang 속성을 찾아볼 수 없음

lang 속성을 추가하고 en 등 적용하고 싶은 언어를 설정한 후 개발자 서버를 다시 시작하고 페이지를 새로 고치면 lang 속성이 나타남

이 사항을 적용하려면 서버를 다시 시작해야 하지만 어쨌든 변경 사항이 적용됨

body에 다른 요소를 추가할 수도 있음

- `<div id="overlays" />` ←이런 식으로
- 그리고 저장 후 새로 고치면 <body>에 <div>가 나타남

## 왜 이렇게 하냐?

HTML 콘텐츠를 애플리케이션 컴포넌트 트리 외부에 추가할 수 있게 해주기 때문

이런 요소를 React의 portal과 같이 사용한다거나 할 때

React portal로 이 <div>를 선택해 모달이나 오버레이를 이 요소로 전달할 수 있음

애플리케이션 컴포넌트 트리 외부에 추가적인 HTML 요소가 있는 게 도움이 될 수도 있음

Next.js 애플리케이션은 결국 반드시 포함되어야 하는 이 메인 컴포넌트에 의해 렌더링되지만 추가 요소를 더하는 게 유익할 때도 있으니까!

따라서 전체 HTML 문서를 편집해야 한다면 이런 \_document.js 파일을 추가해서 작업하면 됨
